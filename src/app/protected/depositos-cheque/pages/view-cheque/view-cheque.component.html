<!-- components/listar-depositos/listar-depositos.component.html -->

<div
  class="card relative shadow-5 border-round p-6"
  style="background: linear-gradient(135deg, #ffffff, #e3f2fd); border-top: 4px solid #1e88e5;"
>
  <!-- Overlay de carga -->
  <div
    class="absolute top-0 left-0 w-full h-full flex align-items-center justify-content-center"
    *ngIf="loading"
    style="background: rgba(255,255,255,0.8); z-index: 10;"
  >
    <p-progressSpinner></p-progressSpinner>
  </div>

  <h2 class="text-3xl font-bold mb-4" style="color: #1e88e5;">
    Lista de Dep√≥sitos
  </h2>

  <p-table
    [value]="depositos"
    [paginator]="true"
    [rows]="10"
    [showCurrentPageReport]="true"
    responsiveLayout="scroll"
    [rowsPerPageOptions]="[10,25,50]"
    currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros"
    class="p-datatable-gridlines w-full custom-table"
    styleClass="shadow-2 border-round"
  >
    <ng-template pTemplate="header">
      <tr style="background-color: #1e88e5; color: white;">
        <th>ID</th>
        <th>Empresa</th>
        <th>Cliente</th>
        <th>Documento</th>
        <th>Num. Factura</th>
        <th>Banco</th>
        <th>Importe</th>
        <th>Moneda</th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-deposito>
      <tr>
        <td>{{ deposito.idDeposito }}</td>
        <td>{{ deposito.nombreEmpresa }}</td>
        <td>{{ deposito.codCliente }}</td>
        <td>{{ deposito.docNum }}</td>
        <td>{{ deposito.numFact }}</td>
        <td>{{ deposito.nombreBanco }}</td>
        <td>{{ deposito.importe | number:'1.2-2' }}</td>
        <td>{{ deposito.moneda }}</td>
        <td>
          <div class="flex gap-2">
            <p-button 
              icon="pi pi-download" 
              styleClass="p-button-rounded p-button-success"
              (onClick)="descargarImagen(deposito)"
              pTooltip="Descargar imagen"
            ></p-button>

            <p-button 
              icon="pi pi-file-pdf" 
              styleClass="p-button-rounded p-button-warning"
              (onClick)="descargarPdf(deposito)"
              pTooltip="Descargar PDF"
            ></p-button>
          </div>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="9" class="text-center">No se encontraron registros</td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-toast position="top-right"></p-toast>